#!/usr/bin/env node

'use strict';

const cli = require('./commandLine');
const { BenchmarkSuite } = require('./benchmarkSuite');
const { prepareBenchmarks, benchmarkSuite } = require('./benchmarksCds');

benchmarkSuite.filter(cli.options.filter);

if (cli.options.list) {
  benchmarkSuite.list();
  return;
}

if (cli.options.systemInfo) {
  benchmarkSuite.enableSystemInformation();
}

if (cli.options.gitInfo) {
  benchmarkSuite.enableGitInformation();
}

prepareBenchmarks().then(() => {
  benchmarkSuite.testEachBenchmark();
  if (!cli.options.testOnly) {
    benchmarkSuite.run();
    benchmarkSuite.print(cli.options.benchmarkReporter);
  }
}).catch(BenchmarkSuite.Fail);
