const publicAPI = {
  get service () {
    const service = require('./services/service_factory')
    Object.defineProperty(publicAPI, 'service', { value: service })
    return service
  },
  for (service) {
    return require('./services/client/for')(service)
  },
  to: {
    local (service) {
      return require('./services/client/to')(service)
    },
    odata_v4 (service) {
      return require('./adapter/odata-v4/to')(service)
    },
    rest (service) {
      return require('./adapter/rest/to')(service)
    }
  },
  passport (...args) {
    return require('./adapter/auth/passport')(...args)
  },
  performanceMeasurement (...args) {
    return require('./adapter/perf/performanceMeasurement')(...args)
  },
  inject: (...args) => {
    require('./cds').inject(...args)
    return this // please return this; makes life easier for callers
  }
}

/**
 * @module server
 */
module.exports = publicAPI
