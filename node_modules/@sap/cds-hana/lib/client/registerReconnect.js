const registerReconnect = client => {
  if (!client._dbc.on) {
    return
  }

  client._dbc.on('close', () => {
    // try to re-connect
    if (client._isInUse) {
      client.connect().catch(() => {
        client.client = false
      })
    }
  })
}

module.exports = registerReconnect
