const isAssociation = element => {
  return element.type === 'cds.Association'
}

const isComplex = element => {
  return !element.type && element.elements
}

const resolveAssociation = element => {
  if (element.foreignKeys) {
    // OLD CSN
    return Object.keys(element.foreignKeys).map(key => {
      return `${element.name}_${key}`
    })
  } else if (element.keys) {
    return element.keys.map(key => {
      return `${element.name}_${key.ref[0]}`
    })
  }

  return []
}

module.exports = {
  isAssociation,
  isComplex,
  resolveAssociation
}
