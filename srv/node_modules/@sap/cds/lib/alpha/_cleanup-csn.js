module.exports = cleanup_csn

function cleanup_csn (csn) { // NOSONAR
    for (let each in csn.definitions) {
        if (each.startsWith('localized.')) { delete csn.definitions [each]; continue }
        if (each.endsWith('_texts')) { delete csn.definitions [each]; continue }
        const d = csn.definitions [each]
        if (d.kind === 'entity') {
            for (let each in d.elements) {
                if (each === 'localized')  delete d.elements [each]
                if (each === 'texts')  delete d.elements [each]
            }
        }
    }
    return csn
}
