const {relative} = require('path'), cwd = process.cwd()
const _local = (filename) => relative (cwd,filename)


exports.duplicate_cds = (...locations) => { throw new Error (`\n
There are duplicate versions of @sap/cds loaded from these locations:

    ${locations.map(_local).join('\n    ')}

To fix this, check all dependencies to "@sap/cds" in your package.json and
those of reused packages and ensure they allow deduped use of @sap/cds.
`)}


exports.no_primary_db = () => { throw new Error (`Not connected to primary datasource!

Invalid attempt to use one of the read/write API methods like 'cds.run'
without required prior connect to a primary datasource. ${
process.argv[1].endsWith('cds') && (
    process.argv[2] === 'run' ||
    process.argv[2] === 'watch' ||
    process.argv[2] === 'serve' ||
    process.argv[2] === 's'
) ? `
You may want to configure one in the cds settings or start the server with
cds ${process.argv[2]} --in-memory` : ''}
`) }
